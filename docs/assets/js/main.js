"use strict";const inputUser=document.querySelector(".js-input"),searchButton=document.querySelector(".js-button"),listOfShows=document.querySelector(".js-result"),formOfShows=document.querySelector(".js-form");let series=[],favourites=[];function preventDefault(e){e.preventDefault()}function handleClick(){const e=inputUser.value;0===e.length?listOfShows.innerHTML='<p class="alert">El campo enviado est√° vacio</p>':fetch("//api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{console.log(e),series=e,displayList()})}function displayList(){listOfShows.innerHTML="";let e='<h2 class="subtitle"> Resultados de la busqueda </h2>';for(const t of series)e+=`<li class="js-listitem eachitemlist" id="${t.show.id}">`,e+=`<h3>${t.show.name}</h3>`,null===t.show.image?e+=`<img src="./assets/images/defaultimage.png" class="" alt="${t.show.name} cover image">`:e+=`<img src="${t.show.image.medium}" class="" alt="${t.show.name} cover image">`,e+="</li>";listOfShows.innerHTML=e,handleListItem()}function handleListItem(){const e=document.querySelectorAll(".js-listitem");for(const t of e)t.addEventListener("click",handleEachSerie)}function handleEachSerie(e){e.currentTarget.classList.toggle("colorVIP");const t=e.currentTarget.id,s=series.find(e=>e.show.id===parseInt(t)),o=favourites.findIndex(e=>e.show.id===parseInt(t));-1===o?favourites.push(s):favourites.splice(o,1),setInLocalStorage(),console.log(favourites),addFavouritesInVipSection()}function addFavouritesInVipSection(){let e="",t='<h2> Mis series favoritas </h2> <button class="reset-button js-reset-button">Reset</button>';for(const s of favourites){e=favouriteIsFavourite(s)?"colorVIP__VIPsection":"",t+=`<li class="js-listitem eachitemlist ${e}" id="${s.show.id}"> `,t+=`<h3>${s.show.name}</h3>`,null===s.show.image?t+=`<img src="./assets/images/defaultimage.png" class="cover" alt="${s.show.name} cover image">`:t+=`<img src="${s.show.image.medium}" class="cover" alt="${s.show.name} cover image">`,t+="</li>",favouriteIsFavourite(s)}document.querySelector(".js-favouritesection").innerHTML=t;document.querySelector(".js-reset-button").addEventListener("click",handleResetButton)}function handleResetButton(){favourites=[],setInLocalStorage(),addFavouritesInVipSection()}function favouriteIsFavourite(e){return void 0!==favourites.find(t=>t.show.id===e.show.id)}function setInLocalStorage(){const e=JSON.stringify(favourites);localStorage.setItem("favourites",e)}function getLocalStorage(){const e=localStorage.getItem("favourites");if(null===e)favourites=[];else{const t=JSON.parse(e);favourites=t,addFavouritesInVipSection()}}getLocalStorage(),searchButton.addEventListener("click",handleClick),formOfShows.addEventListener("submit",preventDefault);